
<!--
  Generated by AI agent. Purpose: give actionable guidance to coding agents
  working in this repository. This project currently contains only a
  top-level `README.md` on branch `main` (Nov 2025). Update this file as the
  repo gains source code, CI, or infra artifacts.
-->

# Copilot / AI Agent Instructions for DevSecOps-practices

Summary
- This repository currently contains a single file: `README.md` at the
  repository root. There are no source files, tests, or CI configuration
  to inspect. The default branch is `main`.

How to proceed when files are missing
- If a task asks you to modify or analyze code, first confirm whether the
  user expects you to scaffold new code or to wait for missing artifacts.
- Ask clarifying questions when requirements are ambiguous (e.g., desired
  language, framework, or CI provider) before creating substantial files.

Repository specifics (discoverable)
- Root files: `README.md` (very small/placeholder).
- Branch: `main` is the default and current branch—do not commit directly to
  `main` without explicit permission. Create a feature branch like
  `feat/copilot/<short-desc>` and open a PR when making non-trivial changes.

Practical rules for automated edits
- Keep changes minimal and focused to the task requested by the user.
- When creating new directories or projects, include a minimal README and a
  short usage example so the user can validate quickly.
- Use Windows PowerShell-compatible commands in any suggested shell snippets
  (this workspace runs on Windows with `powershell.exe`). Use `;` to join
  multiple commands on one line.

Example minimal scaffolds (ask before applying)
- Small Python project:
  - `src/` with `__init__.py` and a named module
  - `tests/` with a basic pytest test
  - `requirements.txt` with one or two deps
  - `README.md` usage snippet
- Small Node project:
  - `package.json` with `name`, `version`, and `scripts.test`
  - `src/index.js` and `test/` with one test

When to create or update `.github/copilot-instructions.md`
- Only update this file with information that is discoverable from the
  repository or explicitly provided by the user. Do not invent workflows or
  CI steps that cannot be validated against repository files or user input.

Communication and PR etiquette
- Open a draft PR for larger scaffolding changes and include a short
  checklist in the PR description describing what the scaffold contains.
- Use clear commit messages: `feat: add <what>` / `fix: <what>` /
  `docs: update copilot instructions`.

What I (agent) couldn't find
- No source code, CI (`.github/workflows`), Dockerfiles, infra manifests,
  or tests were found. If you want me to implement a particular language or
  pipeline, tell me the target stack and I will scaffold accordingly.

Next steps (ask the user)
- Do you want me to scaffold a starting project (specify language)?
- Would you like a CI example (GitHub Actions) added when scaffolding?
 - Would you like a CI example (GitHub Actions) added when scaffolding?

Checklist for AI agents
- **Repo purpose:** DevSecOps-practices — scaffolds for Terraform (AWS/EKS), Ansible, Kubernetes manifests, GitHub Actions CI, Argo CD, monitoring, and security scans. Read `README.md` first for the high-level overview.
- **Build & test (PowerShell examples):**
  - Terraform plan: ``cd infra/terraform; terraform init; terraform plan -var="aws_region=us-east-1"``
  - Run Ansible playbook: ``cd infra/ansible; ansible-playbook -i inventory.ini playbook.yml``
  - Apply k8s manifests locally: ``kubectl apply -f k8s/ -n devsecops``
- **CI secrets required:** `ARTIFACTORY_URL`, `ARTIFACTORY_REPO`, `ARTIFACTORY_USERNAME`, `ARTIFACTORY_PASSWORD`, `SONAR_TOKEN`, `SONAR_HOST_URL`, `SONAR_ORG`, and AWS credentials (or prefer OIDC). See `docs/security-and-artifacts.md`.
- **CI secrets required:** `ARTIFACTORY_URL`, `ARTIFACTORY_REPO`, `ARTIFACTORY_USERNAME`, `ARTIFACTORY_PASSWORD`, `SONAR_TOKEN`, `SONAR_HOST_URL`, `SONAR_ORG`, and AWS credentials (or prefer OIDC). See `docs/security-and-artifacts.md`.

Important infra notes
- Terraform remote state: `infra/terraform/backend.tf` shows the S3/DynamoDB backend template. CI expects `TF_STATE_BUCKET` and `TF_STATE_LOCK_TABLE` secrets for remote state init when running in CI.
- GitHub OIDC: CI uses `aws-actions/configure-aws-credentials` to assume the role stored in `AWS_ROLE_TO_ASSUME` (repository secret). Prefer OIDC over long-lived AWS keys.
- ArgoCD ApplicationSet: `k8s/argo/applicationset.yaml` is a sample ApplicationSet that generates per-environment ArgoCD Applications. Use it to deploy Helm charts and repo-managed manifests.
 - Bootstrap backend: A bootstrap terraform stack is available at `infra/terraform/bootstrap` that creates the S3 bucket and DynamoDB table used by the remote state backend. Run the `Bootstrap Terraform Backend` workflow (or run locally) before running normal `terraform init` in CI.
- **Conventions:**
  - Branches: use `feat/<short-desc>` for features, `fix/<short-desc>` for fixes.
  - Commits: `feat:`, `fix:`, `docs:`, `chore:` prefixes are preferred.
  - Open a draft PR for large scaffolds and include a short checklist.
- **Do NOT edit:** any file that contains real credentials or private secrets (eg. `*.tfvars` with secrets, files named `secrets/*`), or production-only manifests without approval.
- **Files to read first:** `README.md`, `infra/terraform/README.md`, `docs/security-and-artifacts.md`, `.github/workflows/ci-cd.yml`.
- **Contact / approvals:** For large infra or pipeline changes, request review from the repo owner (`praveen-aketi`) or create a draft PR and request reviewers.

Repository tech stack and CI notes
- Tech stack used in this repository scaffold: AWS (EKS), Terraform, Ansible,
  GitHub Actions, Argo CD, JFrog Artifactory, SonarQube, Trivy, Prometheus,
  Grafana, ELK.
- The included workflow `.github/workflows/ci-cd.yml` expects repository
  secrets for Artifactory and SonarQube; see `docs/security-and-artifacts.md`
  for details. When implementing pipelines, prefer GitHub OIDC for AWS auth
  instead of long-lived AWS keys.

Files referenced: `README.md` (root), branch `main`.
